{% extends 'usuarios/base.html' %}

{% block title %}Sistema de Triagem - SUS{% endblock %}

{% block content %}

<style>

/* BADGE CLASSIFICA√á√ÉO SUS */
.badge-sus{
padding:6px 14px;
border-radius:20px;
font-weight:bold;
color:white;
font-size:13px;
}

.Vermelho{background:#d32f2f;}
.Laranja{background:#f57c00;}
.Amarelo{background:#fbc02d;color:black;}
.Verde{background:#388e3c;}
.Azul{background:#1976d2;}

/* OCULTAR NA IMPRESS√ÉO */
@media print{

.btn,
.pagination,
form{
display:none !important;
}

.card{
border:none !important;
box-shadow:none !important;
}

.container-fluid{
margin-top:0 !important;
}

}

</style>


<div class="container-fluid mt-4">


<!-- CABE√áALHO -->
<div class="card shadow border-0 mb-3">

<div class="card-header bg-success text-white d-flex justify-content-between align-items-center">

<div>
<h5 class="mb-0">Sistema de Triagem - SUS</h5>
<small>Painel completo de triagens</small>
</div>

<button onclick="window.print()" class="btn btn-light btn-sm shadow-sm">
üñ® Imprimir
</button>

</div>

</div>


<!-- CARDS RESUMO -->
<div class="row mb-3">

<div class="col-md-4">
<div class="card shadow border-0 bg-success text-white">
<div class="card-body text-center">

<h3 class="mb-0">{{ total_hoje }}</h3>
<small>Triagens Hoje</small>

</div>
</div>
</div>

<div class="col-md-4">
<div class="card shadow border-0 bg-primary text-white">
<div class="card-body text-center">

<h3 class="mb-0">{{ total_mes }}</h3>
<small>Triagens no M√™s</small>

</div>
</div>
</div>

<div class="col-md-4">
<div class="card shadow border-0 bg-dark text-white">
<div class="card-body text-center">

<h3 class="mb-0">{{ total_geral }}</h3>
<small>Total Geral</small>

</div>
</div>
</div>

</div>


<!-- FILTROS -->
<div class="card shadow border-0 mb-3">

<div class="card-body">

<form method="get">

<div class="row align-items-end">

<div class="col-md-4">
<label class="form-label">Paciente</label>
<input type="text"
name="busca"
class="form-control"
placeholder="Nome do paciente"
value="{{ busca }}">
</div>

<div class="col-md-3">
<label class="form-label">Data Inicial</label>
<input type="date"
name="data_inicio"
class="form-control"
value="{{ data_inicio }}">
</div>

<div class="col-md-3">
<label class="form-label">Data Final</label>
<input type="date"
name="data_fim"
class="form-control"
value="{{ data_fim }}">
</div>

<div class="col-md-2 d-grid">
<button class="btn btn-success shadow-sm">
Filtrar
</button>
</div>

</div>

</form>

</div>

</div>


<!-- HIST√ìRICO -->
<div class="card shadow border-0">

<div class="table-responsive">

<table class="table table-hover align-middle mb-0">

<thead class="table-light">
<tr>
<th>Paciente</th>
<th>Press√£o</th>
<th>Temperatura</th>
<th>Satura√ß√£o</th>
<th>Classifica√ß√£o</th>
<th>Data</th>
</tr>
</thead>

<tbody>

{% for t in triagens %}

<tr>

<td><strong>{{ t.paciente.nome }}</strong></td>

<td>{{ t.pressao_arterial }}</td>

<td>{{ t.temperatura }} ¬∞C</td>

<td>{{ t.saturacao }} %</td>

<td>
<span class="badge-sus {{ t.classificacao_risco }}">
{{ t.classificacao_risco }}
</span>
</td>

<td>{{ t.data_triagem|date:"d/m/Y H:i" }}</td>

</tr>

{% empty %}

<tr>
<td colspan="6" class="text-center p-4 text-muted">
Nenhum registro encontrado
</td>
</tr>

{% endfor %}

</tbody>

</table>

</div>


<!-- PAGINA√á√ÉO -->
<div class="card-footer bg-white">

<nav>

<ul class="pagination justify-content-center mb-0">

{% if page_obj.has_previous %}

<li class="page-item">
<a class="page-link"
href="?page=1&busca={{busca}}&data_inicio={{data_inicio}}&data_fim={{data_fim}}">
Primeira
</a>
</li>

<li class="page-item">
<a class="page-link"
href="?page={{page_obj.previous_page_number}}&busca={{busca}}&data_inicio={{data_inicio}}&data_fim={{data_fim}}">
Anterior
</a>
</li>

{% endif %}

<li class="page-item active">
<span class="page-link">
P√°gina {{page_obj.number}} de {{page_obj.paginator.num_pages}}
</span>
</li>

{% if page_obj.has_next %}

<li class="page-item">
<a class="page-link"
href="?page={{page_obj.next_page_number}}&busca={{busca}}&data_inicio={{data_inicio}}&data_fim={{data_fim}}">
Pr√≥xima
</a>
</li>

<li class="page-item">
<a class="page-link"
href="?page={{page_obj.paginator.num_pages}}&busca={{busca}}&data_inicio={{data_inicio}}&data_fim={{data_fim}}">
√öltima
</a>
</li>

{% endif %}

</ul>

</nav>

</div>

</div>

</div>

{% endblock %}